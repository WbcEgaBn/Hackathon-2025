<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Email Subscription</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React 18 -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #ffffff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .input-field {
            border: 2px solid #e5e5e5;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
        }

        .button-primary {
            background-color: #000000;
            transition: all 0.3s ease;
        }

        .button-primary:hover {
            background-color: #1a1a1a;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .button-primary:active {
            transform: translateY(0);
        }

        .icon-container {
            width: 56px;
            height: 56px;
            background-color: #f5f5f5;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: all 0.3s ease;
        }

        .nav-button {
            padding: 0.875rem 1.75rem;
            background-color: #000000;
            color: #ffffff;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .nav-button:hover {
            background-color: #1a1a1a;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }

        .nav-button-secondary {
            padding: 0.875rem 1.75rem;
            background-color: #ffffff;
            color: #000000;
            border: 2px solid #000000;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .nav-button-secondary:hover {
            background-color: #000000;
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-minimal {
            background-color: #ffffff;
            border: 1px solid #f0f0f0;
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.3s ease;
        }

        .card-minimal:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            border-color: #e5e5e5;
        }

        .interest-button {
            transition: all 0.2s ease;
        }

        .interest-button:hover {
            transform: translateY(-2px);
        }
    </style>
</head>

<body class="bg-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function EmailForm() {
            const [email, setEmail] = useState('');
            const [message, setMessage] = useState('');
            const [messageType, setMessageType] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [currentPage, setCurrentPage] = useState('email');
            const [selectedInterests, setSelectedInterests] = useState([]);

            const interests = [
                { id: 'construction', label: 'Construction & Development', icon: 'üèóÔ∏è' },
                { id: 'traffic', label: 'Traffic & Transportation', icon: 'üöó' },
                { id: 'weed', label: 'Parks & Weeds Management', icon: 'üåø' },
                { id: 'zoning', label: 'Zoning & Planning', icon: 'üìê' },
                { id: 'utilities', label: 'Utilities & Infrastructure', icon: '‚ö°' },
                { id: 'safety', label: 'Public Safety', icon: 'üö®' },
                { id: 'education', label: 'Education & Schools', icon: 'üìö' },
                { id: 'business', label: 'Local Business', icon: 'üíº' },
            ];

            const isValidEmail = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

            const handleSubmit = (e) => {
                e.preventDefault();

                if (!isValidEmail(email)) {
                    setMessage("Enter a valid email address");
                    setMessageType("error");
                    return;
                }

                setIsLoading(true);

                setTimeout(() => {
                    setIsLoading(false);
                    setCurrentPage("interests");
                }, 1000);
            };

            const toggleInterest = (id) => {
                setSelectedInterests(prev =>
                    prev.includes(id)
                        ? prev.filter(i => i !== id)
                        : [...prev, id]
                );
            };

            const handleFinish = () => {
                if (selectedInterests.length === 0) {
                    setMessage("Select at least one interest");
                    setMessageType("error");
                    return;
                }

                setMessage("Saved Successfully ‚úÖ");
                setMessageType("success");
            }    
            setTimeout(() => {
        window.location.href = "./location-map.html";
        }, 800);
        };

            if (currentPage === "email") {
                return (
                    <div className="min-h-screen bg-white flex flex-col items-center justify-center px-4 py-8">
                        <div className="w-full max-w-md">
                            {/* Header */}
                            <div className="text-center mb-12 fade-in">
                                <div className="inline-block mb-6">
                                    <div className="icon-container mx-auto mb-4">‚úâÔ∏è</div>
                                </div>
                                <h1 className="text-5xl font-bold text-black mb-3">Stay Updated</h1>
                                <p className="text-gray-600 text-base leading-relaxed">
                                    Subscribe to get the latest updates
                                </p>
                            </div>

                            {/* Form Card */}
                            <div className="card-minimal mb-8 fade-in">
                                <form onSubmit={handleSubmit} className="space-y-5">
                                    <div>
                                        <label className="block text-sm font-semibold text-black mb-3">
                                            Email Address
                                        </label>
                                        <input
                                            type="email"
                                            placeholder="you@example.com"
                                            className="w-full px-4 py-3 input-field bg-white rounded-lg text-black placeholder-gray-400"
                                            value={email}
                                            onChange={(e) => setEmail(e.target.value)}
                                        />
                                    </div>

                                    <button
                                        type="submit"
                                        disabled={isLoading}
                                        className="w-full button-primary text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 disabled:opacity-50"
                                    >
                                        {isLoading ? (
                                            <>
                                                <svg className="animate-spin h-5 w-5" fill="none" viewBox="0 0 24 24">
                                                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                </svg>
                                                Subscribing...
                                            </>
                                        ) : (
                                            <>
                                                Continue
                                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7l5 5m0 0l-5 5m5-5H6" />
                                                </svg>
                                            </>
                                        )}
                                    </button>
                                </form>
                            </div>

                            {/* Message */}
                            {message && (
                                <div className={`p-4 rounded-lg text-center text-sm font-medium transition-all fade-in ${
                                    messageType === 'success'
                                        ? 'bg-green-50 text-green-800 border border-green-200'
                                        : 'bg-red-50 text-red-800 border border-red-200'
                                }`}>
                                    {message}
                                </div>
                            )}

                            {/* Benefits */}
                            <div className="mt-12 text-center">
                                <p className="text-xs text-gray-500 font-medium tracking-wide">BENEFITS</p>
                                <div className="flex justify-around mt-6">
                                    <div>
                                        <p className="text-2xl font-bold text-black">100%</p>
                                        <p className="text-xs text-gray-600 mt-1">No Spam</p>
                                    </div>
                                    <div>
                                        <p className="text-2xl font-bold text-black">1-2x</p>
                                        <p className="text-xs text-gray-600 mt-1">Per Week</p>
                                    </div>
                                    <div>
                                        <p className="text-2xl font-bold text-black">‚àû</p>
                                        <p className="text-xs text-gray-600 mt-1">Unsubscribe</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-white flex flex-col items-center justify-center px-4 py-8">
                    <div className="w-full max-w-3xl">
                        {/* Header */}
                        <div className="text-center mb-10 fade-in">
                            <h2 className="text-4xl font-bold text-black mb-2">Select Your Interests</h2>
                            <p className="text-gray-600">Choose topics you want to stay updated on</p>
                        </div>

                        {/* Interests Grid */}
                        <div className="card-minimal mb-8 fade-in">
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                {interests.map(i => (
                                    <button
                                        key={i.id}
                                        onClick={() => toggleInterest(i.id)}
                                        className={`interest-button p-5 rounded-lg border-2 transition-all text-left ${
                                            selectedInterests.includes(i.id)
                                                ? 'border-black bg-black text-white'
                                                : 'border-gray-200 bg-white text-black hover:border-gray-400'
                                        }`}
                                    >
                                        <div className="flex items-center gap-3">
                                            <span className="text-2xl flex-shrink-0">{i.icon}</span>
                                            <span className="font-medium text-sm leading-snug">{i.label}</span>
                                        </div>
                                    </button>
                                ))}
                            </div>

                            <div className="mt-8 pt-6 border-t border-gray-200">
                                <button
                                    onClick={handleFinish}
                                    className="w-full button-primary text-white font-semibold py-3 rounded-lg"
                                >
                                    Finish
                                </button>
                            </div>

                            {/* Progress */}
                            <div className="mt-6 text-center">
                                <p className="text-sm text-gray-600 mb-2">{selectedInterests.length} of {interests.length} selected</p>
                                <div className="w-full h-1 bg-gray-200 rounded-full overflow-hidden">
                                    <div 
                                        className="h-full bg-black transition-all duration-300"
                                        style={{width: `${(selectedInterests.length / interests.length) * 100}%`}}
                                    ></div>
                                </div>
                            </div>
                        </div>

                        {/* Message */}
                        {message && (
                            <div className={`p-4 rounded-lg text-center text-sm font-medium transition-all fade-in ${
                                messageType === 'success'
                                    ? 'bg-green-50 text-green-800 border border-green-200'
                                    : 'bg-red-50 text-red-800 border border-red-200'
                            }`}>
                                {message}
                            </div>
                        )}

                        {/* Navigation */}
                        <div className="mt-10 flex gap-3 justify-center flex-wrap fade-in">
                            <a href="./location-map.html" className="nav-button">
                                Finish
                            </a>
                            
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<EmailForm />);
    </script>
</body>
</html>
